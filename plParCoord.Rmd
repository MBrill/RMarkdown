---
title: "Parallele Koordinaten mit plotly"
author: "Manfred Brill"
date: "Sommersemester 2021"
output: 
  html_document: 
    fig_caption: yes
    highlight: pygments
    number_sections: yes
    theme: cosmo
    toc: yes
    toc_float: yes
    encoding: utf-8  
  html_notebook:
    highlight: pygments
    number_sections: yes
    theme: cosmo
    toc: yes
    encoding: utf-8  
bibliography: literatur.bib    
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(kableExtra)
suppressPackageStartupMessages(library(dplyr))
library(tidyverse)
library(RColorBrewer)
myPalette <- brewer.pal(8, "Accent")
library(plotly)
# Ausgabe von double-Werte mit  zwei Stellen hinter dem Komma
options(digits=3)
```

# Ein Beispiel mit standardisierten Werten
Wir verwenden zuerst einmal die Daten aus der Folie, die in der Datei *4Dim.csv" abgespeichert sind. Diese Daten sind standardisiert, so dass wir die Abbildung auf die Achsen direkt durchführen können. Wir haben Punkte aus dem vier-dimensionalen Raum. Die Werte der Punkte stehen in entsprechenden Spalten.

```{r daten, message=FALSE, echo=FALSE}
daten <- read_csv2("data/4DimPl.csv")

daten
```



# Ein einführendes Beispiel

Der Datensatz enthält 7 Punkte in einem 4-dimensionalen Raum. 
Die Koordinaten stehen in den Zeilen. Es gibt eine Spalte *Achse*  mit Werten von 1 bis 4.daten)[6]`*, *`r colnames(daten)[7]`* und *`r colnames(daten)[8]`*.



Wir verwenden die Darstellung wie in der Dokumentation von plotly für einen *Basic Parallel Coordinates*.

```{r plotBasic, message=FALSE, echo=TRUE, results='asis'}
fig <- plot_ly(type = 'parcoords', line = list(color = myPalette[3]),
             dimensions = list(
               list(range = c(1,5),
                    label = 'A', values = c(1,4)),
               list(range = c(1,5),
                    label = 'B', values = c(3,1.5)),
               list(range = c(1,5),
                    tickvals = c(1,2,4,5),
                    label = 'C', values = c(2,4)),
               list(range = c(1,5),
                    label = 'D', values = c(4,2))
               )
             )
fig
```


```{r plotBasic2, message=FALSE, echo=TRUE, results='asis'}
fig <- daten %>%
  plot_ly(type = 'parcoords', line = list(color = myPalette[4]),
             dimensions = list(
               list(range = c(0,1),
                    label = 'A1', 
                    values = ~Axis1),
               list(range = c(0,1),
                    label = 'A2', 
                    values = ~Axis2),
               list(range = c(0,1),
                    label = 'A3', 
                    values = ~Axis3),
               list(range = c(0,1),
                    label = 'A3', 
                    values = ~Axis4)
          
               )
             )
fig
```